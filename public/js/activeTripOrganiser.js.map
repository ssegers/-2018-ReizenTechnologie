{"version":3,"sources":["activeTripOrganiser.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"activeTripOrganiser.js","sourcesContent":["$(document).ready(function() {\n\n    var selectedItem = sessionStorage.getItem(\"SelectedItem\");\n    if(selectedItem != null) {\n        $('.travelChanged').val(selectedItem);\n    }\n    // Save the place increment and value of the select\n    var trip_id =  $('.travelChanged').val();\n    getActiveOrganizers(trip_id);\n\n\n    // Monitor your selects for change by classname\n    $('.travelChanged').on('change', function() {\n\n        // Save the place increment and value of the select\n        sessionStorage.setItem(\"SelectedItem\", $(this).val());\n        trip_id = $(this).val();\n        getActiveOrganizers(trip_id);\n    });\n\n\n    function getActiveOrganizers(trip_id) {\n        // Send this data to a script somewhere via AJAX\n        $.ajax({\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            },\n            type: \"POST\",\n            url: \"linkorganisator/\",\n            data: {\n                trip_id: trip_id,\n            }\n        })\n            .done(function( result ) {\n\n                var data = result['aMentors'];\n                buildTable(data);\n            });\n    }\n\n\n});\n\nfunction buildTable(data) {\n    $(\".organizerTable tbody > tr\").remove();\n\n    for (let i = 0; i < data.length; i++) {\n        $(\".organizerTable tbody\").append('<tr>' +\n            '<td>' + data[i].first_name + '</td>' +\n            '<td>' + data[i].last_name + '</td>' +\n            '<td>' +\n            '<button class=\"btn btn-primary p-2 mx-auto\" onclick=\"deleteActiveOrganizer(this,' + data[i].traveller_id + ')\">' +\n            '<i class=\"fas fa-minus-circle fa-2x\"></i></button>' +\n            '</td>' +\n            '</tr>');\n    }\n}\n\nfunction deleteActiveOrganizer(e,traveller_id) {\n    var trip_id =  $('.travelChanged').val();\n    $.ajax({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        },\n        type: \"DELETE\",\n        url: \"linkorganisator/delete\",\n        data: {\n            trip_id: trip_id,\n            traveller_id: traveller_id,\n        },\n        success: function(msg){\n            e.parentElement.parentElement.remove();\n        }\n});\n}\n\nfunction addActiveOrganizer() {\n        var checkedVals = $('.organizersCheckbox:checkbox:checked').map(function() {\n            return this.value;\n        }).get();\n    var trip_id =  $('.travelChanged').val();\n\n    // Send this data to a script somewhere via AJAX\n    $.ajax({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        },\n        type: \"POST\",\n        url: \"linkorganisator/add\",\n        data: {\n            trip_id: trip_id,\n            traveller_ids: checkedVals,\n        }\n    })\n        .done(function( result ) {\n            if(result) {\n                window.location.reload();\n            }\n        });\n}\n//# sourceMappingURL=activeTripOrganiser.js.map\n"]}